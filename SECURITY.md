# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞

## üõ°Ô∏è –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:

### 1. API —Ç–æ–∫–µ–Ω—ã –∏ –∫–ª—é—á–∏ –¥–æ—Å—Ç—É–ø–∞
- **Kaiten API Token** - –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ API Kaiten
- **Bitrix24 Webhook URL** - —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ –∫ Bitrix24

### 2. SSH –¥–∞–Ω–Ω—ã–µ –¥–ª—è VPS —Å–µ—Ä–≤–µ—Ä–∞
- **IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞** - –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ VPS
- **SSH –∫–ª—é—á–∏** - –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **–ü—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º** - –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø—É—Ç–∏ –∫ SSH –∫–ª—é—á–∞–º

### 3. –§–∞–π–ª—ã –º–∞–ø–ø–∏–Ω–≥–æ–≤
- **ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Kaiten ‚Üî Bitrix24
- **ID –≥—Ä—É–ø–ø/–ø—Ä–æ–µ–∫—Ç–æ–≤** - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ ‚Üî –≥—Ä—É–ø–ø
- **ID –∫–∞—Ä—Ç–æ—á–µ–∫/–∑–∞–¥–∞—á** - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫ ‚Üî –∑–∞–¥–∞—á
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ–ª—è** - –∫–µ—à –Ω–∞–∑–≤–∞–Ω–∏–π –∏ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ–ª–µ–π

## üìÅ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –®–∞–≥ 1: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
```bash
cp env.example .env
```

### –®–∞–≥ 2: –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```env
# Kaiten API settings
KAITEN_BASE_URL="https://your-company.kaiten.ru"
KAITEN_API_TOKEN="your-kaiten-api-token-here"

# Bitrix24 Webhook URL
BITRIX_WEBHOOK_URL="https://your-bitrix24-domain.com/rest/user_id/webhook_token/"

# SSH Settings for VPS server
SSH_HOST="your.vps.server.ip"
SSH_USER="root"
SSH_KEY_PATH="/path/to/your/ssh/private/key"
SSH_KEY_PATH_PUTTY="/path/to/your/ssh/private/key.ppk"
VPS_SCRIPT_PATH="/root/update_comment_dates.py"
```

## üö® –ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### ‚ùå –ù–ï –î–ï–õ–ê–¢–¨:
- **–ù–ï** –∫–æ–º–º–∏—Ç–∏—Ç—å —Ñ–∞–π–ª `.env` –≤ git
- **–ù–ï** –ø—Ä–æ–ø–∏—Å—ã–≤–∞—Ç—å —Ç–æ–∫–µ–Ω—ã/–∫–ª—é—á–∏ –≤ –∫–æ–¥–µ –Ω–∞–ø—Ä—è–º—É—é
- **–ù–ï** —Ä–∞–∑–º–µ—â–∞—Ç—å –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª–∞—Ö `env.txt` (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- **–ù–ï** –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å SSH –∫–ª—é—á–∏ –ø–æ –Ω–µ–∑–∞—â–∏—â–µ–Ω–Ω—ã–º –∫–∞–Ω–∞–ª–∞–º

### ‚úÖ –î–ï–õ–ê–¢–¨:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∞–π–ª `.env` –¥–ª—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–æ—Ç–∏—Ä–æ–≤–∞—Ç—å API —Ç–æ–∫–µ–Ω—ã
- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ SSH –∫–ª—é—á–∞–º (–ø—Ä–∞–≤–∞ 600)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ä–µ–¥ (dev/prod)

## üîí .gitignore

–§–∞–π–ª `.gitignore` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è:
```gitignore
# Environment variables and sensitive data
.env
env.txt

# SSH keys and certificates
*.pem
*.ppk
*.key
id_rsa*
known_hosts

# Migration files with sensitive data
mappings/*.json
temp_*.json
```

### –§–∞–π–ª—ã –º–∞–ø–ø–∏–Ω–≥–æ–≤
–í—Å–µ JSON —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫–µ `mappings/` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω—ã –∏–∑ git –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –ø—Ä–∏—á–∏–Ω–∞–º:
- **–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å**: —Å–æ–¥–µ—Ä–∂–∞—Ç ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –≥—Ä—É–ø–ø –∏ –ø—Ä–æ–µ–∫—Ç–æ–≤
- **–°–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ—Å—Ç—å**: –¥–∞–Ω–Ω—ã–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã –¥–ª—è –∫–∞–∂–¥–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Kaiten/Bitrix24
- **–ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è**: —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å–∏—Å—Ç–µ–º—ã –º–∏–≥—Ä–∞—Ü–∏–∏

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∞–π–ª `env.txt`, –∫–æ—Ç–æ—Ä—ã–π:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–∫–ª—é—á–∞–µ—Ç—Å—è –∏–∑ git
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ `.env` –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üìã –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

- [ ] –í—Å–µ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª–µ `.env`
- [ ] –§–∞–π–ª `.env` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore`
- [ ] –ù–µ—Ç –∂–µ—Å—Ç–∫–æ –ø—Ä–æ–ø–∏—Å–∞–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ –≤ –∫–æ–¥–µ
- [ ] SSH –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [ ] –§–∞–π–ª `env.txt` —É–¥–∞–ª–µ–Ω –∏–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω
- [ ] JSON —Ñ–∞–π–ª—ã –º–∞–ø–ø–∏–Ω–≥–æ–≤ –∏—Å–∫–ª—é—á–µ–Ω—ã –∏–∑ git (`mappings/*.json` –≤ `.gitignore`)
- [ ] –ù–µ—Ç —Ñ–∞–π–ª–æ–≤ —Å ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π/–≥—Ä—É–ø–ø –≤ –∏–Ω–¥–µ–∫—Å–µ git

## üÜò –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ–ø–∞–ª–∏ –≤ git

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ** —Å–º–µ–Ω–∏—Ç–µ –≤—Å–µ —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã/–∫–ª—é—á–∏
2. –û—á–∏—Å—Ç–∏—Ç–µ –∏—Å—Ç–æ—Ä–∏—é git:
   ```bash
   git filter-branch --force --index-filter 'git rm --cached --ignore-unmatch .env' --prune-empty --tag-name-filter cat -- --all
   ```
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã –∏ –∫–ª—é—á–∏ –¥–æ—Å—Ç—É–ø–∞
4. –û–±–Ω–æ–≤–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `.env` —Ñ–∞–π–ª–µ

## üîÑ –†–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π

### Kaiten API Token
1. –í–æ–π–¥–∏—Ç–µ –≤ Kaiten ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí API
2. –û—Ç–∑–æ–≤–∏—Ç–µ —Å—Ç–∞—Ä—ã–π —Ç–æ–∫–µ–Ω
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω
4. –û–±–Ω–æ–≤–∏—Ç–µ `KAITEN_API_TOKEN` –≤ `.env`

### Bitrix24 Webhook
1. –í–æ–π–¥–∏—Ç–µ –≤ Bitrix24 ‚Üí –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Üí Webhook
2. –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ webhook
3. –û–±–Ω–æ–≤–∏—Ç–µ `BITRIX_WEBHOOK_URL` –≤ `.env`

### SSH –∫–ª—é—á–∏
1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –ø–∞—Ä—É –∫–ª—é—á–µ–π: `ssh-keygen -t rsa -b 4096`
2. –ó–∞–º–µ–Ω–∏—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
3. –û–±–Ω–æ–≤–∏—Ç–µ –ø—É—Ç–∏ –≤ `.env` 