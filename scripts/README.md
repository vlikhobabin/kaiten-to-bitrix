# Scripts Directory

–ö–∞—Ç–∞–ª–æ–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Kaiten –≤ Bitrix24 –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–∑–¥–∞–Ω–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞

```
scripts/
‚îú‚îÄ‚îÄ README.md                      # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
‚îú‚îÄ‚îÄ user_migration.py             # –û—Å–Ω–æ–≤–Ω–æ–π –º–∏–≥—Ä–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ space_migration.py            # –û—Å–Ω–æ–≤–Ω–æ–π –º–∏–≥—Ä–∞—Ç–æ—Ä –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤
‚îú‚îÄ‚îÄ card_migration.py             # –û—Å–Ω–æ–≤–Ω–æ–π –º–∏–≥—Ä–∞—Ç–æ—Ä –∫–∞—Ä—Ç–æ—á–µ–∫  
‚îú‚îÄ‚îÄ custom_fields_migration.py    # –û—Å–Ω–æ–≤–Ω–æ–π –º–∏–≥—Ä–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–æ–ª–µ–π
‚îú‚îÄ‚îÄ utils/                        # –£—Ç–∏–ª–∏—Ç—ã –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ get_all_cards.py          # –ê–Ω–∞–ª–∏–∑ –∫–∞—Ä—Ç–æ—á–µ–∫ Kaiten
‚îÇ   ‚îú‚îÄ‚îÄ list_kaiten_users.py      # –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ get_existing_groups.py    # –ê–Ω–∞–ª–∏–∑ –≥—Ä—É–ø–ø Bitrix24
‚îÇ   ‚îú‚îÄ‚îÄ delete_all_groups.py      # –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø
‚îÇ   ‚îî‚îÄ‚îÄ bulk_card_migration.py    # –ú–∞—Å—Å–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫
‚îî‚îÄ‚îÄ vps/                          # VPS —Å–∫—Ä–∏–ø—Ç—ã –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
    ‚îú‚îÄ‚îÄ deploy_vps_scripts.ps1    # –ï–¥–∏–Ω—ã–π deploy —Å–∫—Ä–∏–ø—Ç
    ‚îú‚îÄ‚îÄ create_custom_fields_on_vps.py
    ‚îú‚îÄ‚îÄ update_comment_dates.py
    ‚îî‚îÄ‚îÄ update_group_features.py
```

## üîÑ –û—Å–Ω–æ–≤–Ω—ã–µ –º–∏–≥—Ä–∞—Ç–æ—Ä—ã

### `user_migration.py`
**–ú–∏–≥—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Kaiten ‚Üí Bitrix24**

–ü–µ—Ä–µ–Ω–æ—Å–∏—Ç –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å email-–∞–¥—Ä–µ—Å–∞–º–∏ –∏–∑ Kaiten –≤ Bitrix24. –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö.

```bash
python scripts/user_migration.py
```

**–§—É–Ω–∫—Ü–∏–∏:**
- –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ Kaiten
- –§–∏–ª—å—Ç—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å email
- –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã—Ö –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ Bitrix24
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –º–∞–ø–ø–∏–Ω–≥ ID –≤ `mappings/user_mapping.json`
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –º–∏–≥—Ä–∞—Ü–∏–∏

---

### `custom_fields_migration.py`
**–ú–∏–≥—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–æ–ª–µ–π Kaiten ‚Üí Bitrix24**

–ü–µ—Ä–µ–Ω–æ—Å–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ–ª—è –∏–∑ Kaiten –≤ Bitrix24 —á–µ—Ä–µ–∑ –¥–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å: –ª–æ–∫–∞–ª—å–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, –Ω–∞ VPS —Å–æ–∑–¥–∞–µ—Ç –ø–æ–ª—è —á–µ—Ä–µ–∑ SQL.

```bash
python scripts/custom_fields_migration.py --dry-run    # –ê–Ω–∞–ª–∏–∑ –ø–æ–ª–µ–π (—Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º)
python scripts/custom_fields_migration.py             # –ü–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
```

**–î–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å:**
1. **–õ–æ–∫–∞–ª—å–Ω–æ:** –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ–ª—è –∏–∑ Kaiten API
2. **–ù–∞ VPS:** –°–æ–∑–¥–∞–µ—Ç –ø–æ–ª—è –≤ –ë–î Bitrix24 —á–µ—Ä–µ–∑ –ø—Ä—è–º—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã

**–§—É–Ω–∫—Ü–∏–∏:**
- –ê–Ω–∞–ª–∏–∑ –ø–æ–ª–µ–π –≤ —Ä–µ–∂–∏–º–µ `--dry-run` (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–∏–ø—ã, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–Ω–∞—á–µ–Ω–∏–π)
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–µ–π —Å–æ –≤—Å–µ–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –∏ —è–∑—ã–∫–æ–≤—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞–ø–ø–∏–Ω–≥ Kaiten ID ‚Üí Bitrix ID –ø–æ–ª–µ–π –∏ –∑–Ω–∞—á–µ–Ω–∏–π
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–∞–ø–ø–∏–Ω–≥–∞ –≤ `mappings/custom_fields_mapping.json`

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- SSH –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è VPS: `SSH_HOST`, `SSH_USER`, `SSH_KEY_PATH` –≤ `env.txt`
- –î–æ—Å—Ç—É–ø –∫ MySQL –Ω–∞ VPS —Å–µ—Ä–≤–µ—Ä–µ

---

### `space_migration.py`
**–ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ Kaiten ‚Üí –ì—Ä—É–ø–ø—ã Bitrix24**

–ü–µ—Ä–µ–Ω–æ—Å–∏—Ç –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ (–ù–ï –¥–æ—Å–∫–∏!) –∏–∑ Kaiten –≤ –≥—Ä—É–ø–ø—ã Bitrix24 –ø–æ –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–µ.

```bash
python scripts/space_migration.py --list-spaces          # –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤
python scripts/space_migration.py                        # –ú–∏–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤
python scripts/space_migration.py --limit 10             # –ü–µ—Ä–≤—ã–µ 10 –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ (—Ç–µ—Å—Ç)
python scripts/space_migration.py --space-id 123         # –ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ
```

**–õ–æ–≥–∏–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏:**
- –ö–æ–Ω–µ—á–Ω—ã–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ (–±–µ–∑ –¥–æ—á–µ—Ä–Ω–∏—Ö) ‚Üí –≥—Ä—É–ø–ø—ã Bitrix24
- –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ 2-–≥–æ —É—Ä–æ–≤–Ω—è (–µ—Å–ª–∏ —Ä–æ–¥–∏—Ç–µ–ª—å –∏–º–µ–µ—Ç –¥–æ—á–µ—Ä–Ω–∏–µ) ‚Üí –≥—Ä—É–ø–ø—ã Bitrix24
- –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ –∏–∑ `config/space_exclusions.py`
- –£—á–∞—Å—Ç–Ω–∏–∫–∏: –∏–∑ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ Kaiten

**–°–æ–∑–¥–∞–µ—Ç:** `mappings/space_mapping.json`

---

### `card_migration.py`
**–ú–∏–≥—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ Kaiten ‚Üí –ó–∞–¥–∞—á–∏ Bitrix24**

–ü–µ—Ä–µ–Ω–æ—Å–∏—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ Kaiten –≤ –∑–∞–¥–∞—á–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –≥—Ä—É–ø–ø—ã Bitrix24.

```bash
python scripts/card_migration.py --space-id 426722 --list-only    # –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ä—Ç–æ—á–µ–∫
python scripts/card_migration.py --space-id 426722                # –ü–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
python scripts/card_migration.py --space-id 426722 --limit 5      # –ü–µ—Ä–≤—ã–µ 5 –∫–∞—Ä—Ç–æ—á–µ–∫
python scripts/card_migration.py --space-id 426722 --card-id 123  # –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞
python scripts/card_migration.py --space-id 426722 --include-archived  # –í–∫–ª—é—á–∞—è –∞—Ä—Ö–∏–≤–Ω—ã–µ (type: 3)
```

**–§—É–Ω–∫—Ü–∏–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≥—Ä—É–ø–ø—É Bitrix24 –∏–∑ `space_mapping.json`
- –ü–µ—Ä–µ–Ω–æ—Å–∏—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Å—Ç–∞–¥–∏—è–º–∏:
  - `type: 1` (–Ω–∞—á–∞–ª—å–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏) ‚Üí —Å—Ç–∞–¥–∏—è "–ù–æ–≤—ã–µ"
  - `type: 2` –∏ –¥—Ä—É–≥–∏–µ ‚Üí —Å—Ç–∞–¥–∏—è "–í—ã–ø–æ–ª–Ω—è—é—Ç—Å—è" 
  - `type: 3` (—Ñ–∏–Ω–∞–ª—å–Ω—ã–µ) ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –∏–ª–∏ —Å—Ç–∞–¥–∏—è "–°–¥–µ–ª–∞–Ω—ã" + STATUS=5 (—Å `--include-archived`)
- –ü–µ—Ä–µ–Ω–æ—Å–∏—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, —Ñ–∞–π–ª—ã, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ–ª—è
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ–∂–∏–º–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á

**–ü–∞—Ä–∞–º–µ—Ç—Ä `--include-archived`:**
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–∞—Ä—Ç–æ—á–∫–∏ –∏–∑ —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö –∫–æ–ª–æ–Ω–æ–∫ (type: 3) –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏. 
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤, –≥–¥–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ 
–∏ –∞—Ä—Ö–∏–≤–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ —Å—Ç–∞–¥–∏—é "–°–¥–µ–ª–∞–Ω—ã" —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "–ó–∞–≤–µ—Ä—à–µ–Ω–∞" (STATUS=5).

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:**
- **STAGE_ID** - —Å—Ç–∞–¥–∏—è –∫–∞–Ω–±–∞–Ω–∞ (–∫–æ–ª–æ–Ω–∫–∞): "–ù–æ–≤—ã–µ", "–í—ã–ø–æ–ª–Ω—è—é—Ç—Å—è", "–°–¥–µ–ª–∞–Ω—ã"
- **STATUS** - —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ –≤ Bitrix24: 1=–Ω–æ–≤–∞—è, 2=–≤ —Ä–∞–±–æ—Ç–µ, 3=–æ–∂–∏–¥–∞–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—è, 5=–∑–∞–≤–µ—Ä—à–µ–Ω–∞
- –ê—Ä—Ö–∏–≤–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ (type: 3) –ø–æ–ª—É—á–∞—é—Ç STATUS=5 –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ

---

## üîß –£—Ç–∏–ª–∏—Ç—ã

### `utils/bulk_card_migration.py`
**–ú–∞—Å—Å–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤**

–ó–∞–ø—É—Å–∫–∞–µ—Ç `card_migration.py` –≤ —Ü–∏–∫–ª–µ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö.

```bash
python scripts/utils/bulk_card_migration.py
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –°–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–∏—Å–æ–∫ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–∞–∂–¥–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –æ—à–∏–±–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
- –ü—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö

---

### `utils/get_all_cards.py`
**–ü–æ–ª—É—á–µ–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏–∑ –∫–∞—Ä—Ç–æ—á–µ–∫ –∏–∑ Kaiten**

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ –∏–∑ Kaiten —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏.

```bash
python scripts/utils/get_all_cards.py                                    # –í—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–∏—Å—Ç–µ–º—ã
python scripts/utils/get_all_cards.py --space-id 426722                  # –ö–∞—Ä—Ç–æ—á–∫–∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
python scripts/utils/get_all_cards.py --space-id 426722 --migration-only # –¢–æ–ª—å–∫–æ –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏
python scripts/utils/get_all_cards.py --space-id 426722 --limit 500      # –£–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç
```

**–§—É–Ω–∫—Ü–∏–∏:**
- –ü–æ–ª—É—á–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ –∏–∑ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏ –µ–≥–æ –¥–æ—á–µ—Ä–Ω–∏—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤
- –§–∏–ª—å—Ç—Ä –∫–∞—Ä—Ç–æ—á–µ–∫ –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ (–∏—Å–∫–ª—é—á–∞–µ—Ç –∞—Ä—Ö–∏–≤–Ω—ã–µ –∏ `type: 3` - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Ç–∏–ø–∞–º –∫–æ–ª–æ–Ω–æ–∫
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ü–µ–ª–µ–≤—ã–º —Å—Ç–∞–¥–∏—è–º Bitrix24

---

### `utils/list_kaiten_users.py`
**–ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Kaiten**

–í—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ Kaiten API —Å –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π.

```bash
python scripts/utils/list_kaiten_users.py
```

**–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- ID, email, –ø–æ–ª–Ω–æ–µ –∏–º—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É: –≤—Å–µ–≥–æ, –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö, —Å –∏–º–µ–Ω–∞–º–∏, —Å email
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∞ –¥–æ 147 —Å—Ç—Ä–æ–∫ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —á—Ç–µ–Ω–∏—è

---

### `utils/get_existing_groups.py`
**–ê–Ω–∞–ª–∏–∑ –≥—Ä—É–ø–ø –≤ Bitrix24**

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≥—Ä—É–ø–ø—ã –≤ Bitrix24 —Å –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫—É —Å–æ–∑–¥–∞–Ω–∏—è.

```bash
python scripts/utils/get_existing_groups.py
```

**–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç:**
- –°–∏—Å—Ç–µ–º–Ω—ã–µ –≥—Ä—É–ø–ø—ã (ID 1-3)
- –ì—Ä—É–ø–ø—ã –æ—Ç space-–º–∏–≥—Ä–∞—Ü–∏–∏ (ID 4-69) - —Å—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞
- –ì—Ä—É–ø–ø—ã –æ—Ç board-–º–∏–≥—Ä–∞—Ü–∏–∏ (ID 70+) - –Ω–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
- –í—ã–¥–∞–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–∞–ª—å–Ω–µ–π—à–∏–º –¥–µ–π—Å—Ç–≤–∏—è–º

---

### `utils/delete_all_groups.py`
**–ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø –∏–∑ Bitrix24**

–£–¥–∞–ª—è–µ—Ç –í–°–ï –≥—Ä—É–ø–ø—ã –≤ Bitrix24 –∫—Ä–æ–º–µ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –≤ –∏—Å–∫–ª—é—á–µ–Ω–∏—è—Ö.

```bash
python scripts/utils/delete_all_groups.py                     # –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∫—Ä–æ–º–µ ID 1,2
python scripts/utils/delete_all_groups.py --exclude 1 2 5     # –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∫—Ä–æ–º–µ ID 1,2,5
python scripts/utils/delete_all_groups.py --dry-run           # –ü–æ–∫–∞–∑–∞—Ç—å –ø–ª–∞–Ω –±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è
```

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≥—Ä—É–ø–ø—ã —Å ID 1 –∏ 2
- –†–µ–∂–∏–º dry-run –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- –¢—Ä–µ–±—É–µ—Ç —Å—Ç—Ä–æ–≥–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (–≤–≤–æ–¥ 'DELETE')
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

---

## üìÅ –°–æ–∑–¥–∞–≤–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã

–°–∫—Ä–∏–ø—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –∫–∞—Ç–∞–ª–æ–≥–µ `mappings/`:
- `user_mapping.json` - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Kaiten ‚Üî Bitrix24
- `space_mapping.json` - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ ID –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ Kaiten ‚Üî –≥—Ä—É–ø–ø Bitrix24
- `card_mapping.json` - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ ID –∫–∞—Ä—Ç–æ—á–µ–∫ Kaiten ‚Üî –∑–∞–¥–∞—á Bitrix24
- `custom_fields_mapping.json` - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–æ–ª–µ–π Kaiten ‚Üî Bitrix24
- `custom_properties_cache.json` - –∫–µ—à –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–æ–ª–µ–π Kaiten (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π)

## üîÑ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

1. **–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö:**
   ```bash
   python scripts/utils/list_kaiten_users.py
   python scripts/utils/get_existing_groups.py
   python scripts/space_migration.py --list-spaces
   python scripts/custom_fields_migration.py --dry-run
   ```

2. **–ü–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è:**
   ```bash
   python scripts/user_migration.py                    # 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
   python scripts/custom_fields_migration.py           # 2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ–ª—è
   python scripts/space_migration.py                   # 3. –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ ‚Üí –≥—Ä—É–ø–ø—ã
   python scripts/card_migration.py --space-id <ID>    # 4. –ö–∞—Ä—Ç–æ—á–∫–∏ ‚Üí –∑–∞–¥–∞—á–∏
   ```

3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
   ```bash
   python scripts/custom_fields_migration.py --dry-run
   python scripts/space_migration.py --limit 5
   python scripts/card_migration.py --space-id <ID> --list-only
   python scripts/card_migration.py --space-id <ID> --limit 5
   python scripts/card_migration.py --space-id <ID> --list-only --include-archived  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä—Ö–∏–≤–Ω—ã—Ö
   ```

## üõ†Ô∏è VPS –°–∫—Ä–∏–ø—Ç—ã

### –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–í—Å–µ VPS —Å–∫—Ä–∏–ø—Ç—ã —Ç–µ–ø–µ—Ä—å —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è –≤ –µ–¥–∏–Ω–æ–π –ø–∞–ø–∫–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ: `/root/kaiten-vps-scripts/`

**–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:**
```powershell
.\scripts\vps\deploy_vps_scripts.ps1
```

**VPS —Å–∫—Ä–∏–ø—Ç—ã:**
- `create_custom_fields_on_vps.py` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–æ–ª–µ–π —á–µ—Ä–µ–∑ SQL
- `update_comment_dates.py` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤ –ë–î
- `update_group_features.py` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ —Ä–∞–±–æ—á–∏—Ö –≥—Ä—É–ø–ø

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞ VPS:**
```bash
# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ–ª—è
python3 /root/kaiten-vps-scripts/create_custom_fields_on_vps.py

# –î–∞—Ç—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤  
python3 /root/kaiten-vps-scripts/update_comment_dates.py '{"601": "2025-07-08 14:22:00"}'

# –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≥—Ä—É–ø–ø
python3 /root/kaiten-vps-scripts/update_group_features.py --view-group 38
python3 /root/kaiten-vps-scripts/update_group_features.py --update-all
``` 